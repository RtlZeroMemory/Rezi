{
  "schemaVersion": 1,
  "cases": [
    {
      "name": "Overlapping siblings: later sibling wins (preorder last-wins)",
      "tree": {
        "ref": "root",
        "kind": "column",
        "props": {},
        "children": [
          { "ref": "a", "kind": "button", "props": { "id": "a", "label": "A" } },
          { "ref": "b", "kind": "button", "props": { "id": "b", "label": "B" } }
        ]
      },
      "layoutRects": {
        "root": { "x": 0, "y": 0, "w": 4, "h": 1 },
        "a": { "x": 0, "y": 0, "w": 4, "h": 1 },
        "b": { "x": 0, "y": 0, "w": 4, "h": 1 }
      },
      "points": [{ "x": 1, "y": 0, "expectedId": "b" }]
    },
    {
      "name": "Multiple overlaps: last in preorder wins (a < b < c)",
      "tree": {
        "ref": "root",
        "kind": "column",
        "props": {},
        "children": [
          { "ref": "a", "kind": "button", "props": { "id": "a", "label": "A" } },
          { "ref": "b", "kind": "button", "props": { "id": "b", "label": "B" } },
          { "ref": "c", "kind": "button", "props": { "id": "c", "label": "C" } }
        ]
      },
      "layoutRects": {
        "root": { "x": 0, "y": 0, "w": 4, "h": 1 },
        "a": { "x": 0, "y": 0, "w": 4, "h": 1 },
        "b": { "x": 0, "y": 0, "w": 4, "h": 1 },
        "c": { "x": 0, "y": 0, "w": 4, "h": 1 }
      },
      "points": [{ "x": 1, "y": 0, "expectedId": "c" }]
    },
    {
      "name": "Nested overlap: deeper later descendant wins in same branch",
      "tree": {
        "ref": "root",
        "kind": "column",
        "props": {},
        "children": [
          {
            "ref": "box1",
            "kind": "box",
            "props": {},
            "children": [
              { "ref": "a", "kind": "button", "props": { "id": "a", "label": "A" } },
              {
                "ref": "box2",
                "kind": "box",
                "props": {},
                "children": [{ "ref": "b", "kind": "button", "props": { "id": "b", "label": "B" } }]
              }
            ]
          }
        ]
      },
      "layoutRects": {
        "root": { "x": 0, "y": 0, "w": 5, "h": 2 },
        "box1": { "x": 0, "y": 0, "w": 5, "h": 2 },
        "a": { "x": 0, "y": 0, "w": 5, "h": 2 },
        "box2": { "x": 0, "y": 0, "w": 5, "h": 2 },
        "b": { "x": 0, "y": 0, "w": 5, "h": 2 }
      },
      "points": [{ "x": 2, "y": 1, "expectedId": "b" }]
    },
    {
      "name": "Nested overlap across siblings: later subtree still wins",
      "tree": {
        "ref": "root",
        "kind": "column",
        "props": {},
        "children": [
          {
            "ref": "left",
            "kind": "box",
            "props": {},
            "children": [
              { "ref": "inner", "kind": "button", "props": { "id": "inner", "label": "I" } }
            ]
          },
          {
            "ref": "right",
            "kind": "box",
            "props": {},
            "children": [
              { "ref": "tail", "kind": "button", "props": { "id": "tail", "label": "T" } }
            ]
          }
        ]
      },
      "layoutRects": {
        "root": { "x": 0, "y": 0, "w": 5, "h": 2 },
        "left": { "x": 0, "y": 0, "w": 5, "h": 2 },
        "inner": { "x": 0, "y": 0, "w": 5, "h": 2 },
        "right": { "x": 0, "y": 0, "w": 5, "h": 2 },
        "tail": { "x": 0, "y": 0, "w": 5, "h": 2 }
      },
      "points": [{ "x": 1, "y": 0, "expectedId": "tail" }]
    },
    {
      "name": "Overlap tie ignores disabled later candidate",
      "tree": {
        "ref": "root",
        "kind": "column",
        "props": {},
        "children": [
          { "ref": "enabled", "kind": "button", "props": { "id": "enabled", "label": "E" } },
          {
            "ref": "disabled",
            "kind": "button",
            "props": { "id": "disabled", "label": "D", "disabled": true }
          }
        ]
      },
      "layoutRects": {
        "root": { "x": 0, "y": 0, "w": 5, "h": 1 },
        "enabled": { "x": 0, "y": 0, "w": 5, "h": 1 },
        "disabled": { "x": 0, "y": 0, "w": 5, "h": 1 }
      },
      "points": [{ "x": 2, "y": 0, "expectedId": "enabled" }]
    },
    {
      "name": "Clipped overlap: later nested child only wins inside ancestor clip",
      "tree": {
        "ref": "root",
        "kind": "column",
        "props": {},
        "children": [
          { "ref": "base", "kind": "button", "props": { "id": "base", "label": "Base" } },
          {
            "ref": "clipBox",
            "kind": "box",
            "props": {},
            "children": [
              { "ref": "clipped", "kind": "button", "props": { "id": "clipped", "label": "C" } }
            ]
          }
        ]
      },
      "layoutRects": {
        "root": { "x": 0, "y": 0, "w": 4, "h": 1 },
        "base": { "x": 0, "y": 0, "w": 4, "h": 1 },
        "clipBox": { "x": 0, "y": 0, "w": 2, "h": 1 },
        "clipped": { "x": 0, "y": 0, "w": 4, "h": 1 }
      },
      "points": [
        { "x": 1, "y": 0, "expectedId": "clipped" },
        { "x": 3, "y": 0, "expectedId": "base" }
      ]
    },
    {
      "name": "Partial sibling overlap: later sibling wins only in overlap region",
      "tree": {
        "ref": "root",
        "kind": "column",
        "props": {},
        "children": [
          { "ref": "first", "kind": "button", "props": { "id": "first", "label": "F" } },
          { "ref": "second", "kind": "button", "props": { "id": "second", "label": "S" } }
        ]
      },
      "layoutRects": {
        "root": { "x": 0, "y": 0, "w": 4, "h": 1 },
        "first": { "x": 0, "y": 0, "w": 3, "h": 1 },
        "second": { "x": 1, "y": 0, "w": 3, "h": 1 }
      },
      "points": [
        { "x": 0, "y": 0, "expectedId": "first" },
        { "x": 2, "y": 0, "expectedId": "second" },
        { "x": 3, "y": 0, "expectedId": "second" }
      ]
    }
  ]
}
